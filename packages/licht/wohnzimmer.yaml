input_boolean:     
  bewegungsmelder_wohnzimmer_deaktiviert:
    name: Bewegungsmelder deaktiviert
    initial: off 
    icon: mdi:sync-off

light:
  - platform: switch
    name: Couch
    entity_id: switch.couch
    
  - platform: switch
    name: Strahler
    entity_id: switch.strahler    
   
  - platform: switch
    name: Vitrine
    entity_id: switch.vitrine  
    
lightingsm:
  bewegung_wohnzimmer:
    friendly_name: "Bewegung Wohnzimmer"
    sensor: binary_sensor.bewegungsmelder_wohnzimmer
    entities:
      - light.couch
      - light.strahler
    delay: 60     
    overrides:
      - binary_sensor.sonne_tagsueber
      - input_boolean.bewegungsmelder_wohnzimmer_deaktiviert
      - switch.computer
      - switch.watchtv_wohnzimmer
      
switch:
  - platform: brematic
    host: 192.168.2.57        
    switches:
      couch:
        friendly_name: Couch
        system_code: "11110"
        unit_code: "10000"
      strahler:
        friendly_name: Strahler
        system_code: "00000"
        unit_code: "00100"
      vitrine:
        friendly_name: Vitrine
        system_code: "11111"
        unit_code: "00010"

#  - platform: command_line
#    scan_interval: 5
#    switches:    
#      couch:
#        friendly_name: Couch
#        command_on: 'curl -s -X POST "http://192.168.2.70/connair/index.php?type=device&id=1&action=on"'
#        command_off: 'curl -s -X POST "http://192.168.2.70/connair/index.php?type=device&id=1&action=off"'
#        command_state: 'curl -s -X GET "http://192.168.2.70/connair/index.php?type=device&id=1&action=status"'
#        value_template: '{{ value_json.state == "ON" }}'
#      strahler:
#        friendly_name: Strahler
#        command_on: 'curl -s -X POST "http://192.168.2.70/connair/index.php?type=device&id=2&action=on"'
#        command_off: 'curl -s -X POST "http://192.168.2.70/connair/index.php?type=device&id=2&action=off"'
#        command_state: 'curl -s -X GET "http://192.168.2.70/connair/index.php?type=device&id=2&action=status"'
#        value_template: '{{ value_json.state == "ON" }}'
#      vitrine:
#        friendly_name: Vitrine
#        command_on: 'curl -s -X POST "http://192.168.2.70/connair/index.php?type=device&id=3&action=on"'
#        command_off: 'curl -s -X POST "http://192.168.2.70/connair/index.php?type=device&id=3&action=off"'
#        command_state: 'curl -s -X GET "http://192.168.2.70/connair/index.php?type=device&id=3&action=status"'
#        value_template: '{{ value_json.state == "ON" }}'        
    
automation:       
  - alias: Licht Abends
    initial_state: true
    trigger:
      platform: state
      entity_id: sensor.tageszeit
      to: 'Abendd√§mmerung'
    condition:
      - condition: state
        entity_id: binary_sensor.zu_hause
        state: 'on'     
    action:
      - service: light.turn_on
        entity_id: light.couch, light.strahler
        
  - alias: Licht Couch
    initial_state: true
    trigger:
      - platform: event
        event_type: xiaomi_aqara.cube_action
        event_data:
          entity_id: binary_sensor.cube_158d0001100d7a
          action_type: tap_twice        
    action:
      - service: light.toggle
        entity_id: light.couch
        
homeassistant:
  customize:
    switch.couch:
      hidden: true
    switch.strahler:
      hidden: true
    switch.vitrine:
      hidden: true
      
    light.couch:
      icon: mdi:sofa
    light.strahler:
      icon: mdi:spotlight
    light.vitrine:
      icon: mdi:lightbulb-on-outline     